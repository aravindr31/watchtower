---
export const prerender = true;

import { Image } from "astro:assets";
import watchtower from "../assets/watchtower.svg";
import Searchbar from "./Searchbar.astro";

let svgFill = {
  leftStroke: "#E68585",
  rightStroke: "#DE5C5C",
  centerStroke: "#D63333",
};

const path = Astro.url.pathname;
const hideNavSearch = path == "/" || path.includes("/search") || false;
const token = Astro.cookies.get("access-token")?.boolean();
if (token) {
  svgFill.leftStroke = "#85E685";
  svgFill.rightStroke = "#5CDE5C";
  svgFill.centerStroke = "#33D633";
}
---

<nav
  class="bg-primary/30 backdrop-blur-md rounded-md z-100 nav sticky top-5 mx-2 sm:mx-6 md:mx-10 lg:mx-16"
>
  <div
    class="container mx-auto flex flex-col md:flex-row items-center justify-between px-4 lg:px-0 py-4"
  >
    <div class="flex flex-row w-full">
      <div class="flex space-x-1 justify-between items-center w-full md:w-auto">
        <a href="/" class="flex items-center justify-center font-bold text-xl">
          <Image src={watchtower} inferSize={true} alt="watchtower-icon" />
          <span class="font-inter subpixel-antialiased">watch</span>
          <span class="text-accent-light font-inter subpixel-antialiased"
            >tower</span
          >
        </a>
        <div
          class={`text-center px-2 ${token ? "pointer-events-none" : "pointer-events-auto"}`}
        >
          <a href="/authorize">
            <svg
              version="1.1"
              baseProfile="tiny"
              id="Layer_1"
              xmlns="http://www.w3.org/2000/svg"
              xmlns:xlink="http://www.w3.org/1999/xlink"
              viewBox="0 0 24 24"
              width="20px"
              overflow="visible"
              xml:space="preserve"
              fill="#000000"
              ><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g
                id="SVGRepo_tracerCarrier"
                stroke-linecap="round"
                stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier">
                <g>
                  <g transform="translate(4.000000, 1.000000)">
                    <path
                      fill={svgFill.leftStroke}
                      d="M8,0l-9,4v6c0,5.6,3.8,10.7,9,12c5.2-1.3,9-6.4,9-12V4L8,0z M8,11h7c-0.5,4.1-3.3,7.8-7,8.9V11l-7,0V5.3 l7-3.1V11z"
                    ></path>
                    <path
                      fill={svgFill.rightStroke}
                      d="M8,0v22c5.2-1.3,9-6.4,9-12V4L8,0z M15,11c-0.5,4.1-3.3,7.8-7,8.9V11L15,11z"
                    ></path>
                    <path
                      fill-rule="evenodd"
                      fill={svgFill.centerStroke}
                      d="M17,11h-2c0,0,0,0.3-0.1,0.6L17,11z"></path>
                    <polygon
                      fill-rule="evenodd"
                      fill={svgFill.centerStroke}
                      points="-1,11 1,11 1,10.4 "></polygon>
                  </g>
                </g>
              </g></svg
            >
          </a>
        </div>
      </div>
      <ul class="flex flex-row items-center w-auto mx-4">
        <li class="w-fit mx-2 md:mx-4 lg:ml-16">
          <a href="/movie" class="hover:text-accent-light font-mono">Movies</a>
        </li>
        <li class="md:hidden text-red-500">
          <p>|</p>
        </li>
        <li class="w-fit mx-2 md:mx-4 lg:ml-6">
          <a href="/tv" class="hover:text-accent-light font-mono">Shows</a>
        </li>
      </ul>
    </div>
    {!hideNavSearch && <Searchbar />}
  </div>
</nav>
<script></script>
